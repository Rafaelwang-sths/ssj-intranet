<!doctype html>
<html lang="en" class="no-js">
<head><script async src="https://www.googletagmanager.com/gtag/js?id=G-49T9M12F86"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-49T9M12F86');
</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-P2NKBBJZ');</script>
  
  <title>iSSJ CMC</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://designsystem.nsw.gov.au/nsw-og-image.jpg">
  <meta name="robots" content="noindex" />
  <link rel="icon" href="/api/favicon.ico">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone" rel="stylesheet">
  <link rel="stylesheet" href="https://designsystem.nsw.gov.au/docs/css/docs.css">
  <script src="/api/disable-inspect.js" defer></script>
  <!-- Hotjar Tracking Code for NSW Design System -->
  <script>
      (function(h,o,t,j,a,r){
          h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
          h._hjSettings={hjid:5063548,hjsv:6};
          a=o.getElementsByTagName('head')[0];
          r=o.createElement('script');r.async=1;
          r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
          a.appendChild(r);
      })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
  </script>
</head>


  

<body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P2NKBBJZ"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    

<nav class="nsw-skip" aria-label="Skip to links">
  <a href="#main-nav"><span>Skip to navigation</span></a>
  <a href="#"><span>Skip to content</span></a>
</nav>
<div class="nsw-masthead">
  <div class="nsw-container">An Interact iSSJ Website</div>
</div>


<header class="nsw-header">
  <div class="nsw-header__container">
    <div class="nsw-header__inner">
      <div class="nsw-header__main">
        <div class="nsw-header__waratah">
            <a href="https://designsystem.digital.nsw.gov.au/">
              <a href="/index.html">
                  <img src="/api/sths-logo.png" 
                       alt="NSW Government" class="nsw-header__logo" style="width: 130px; height: auto;">
                </a>
              <span class="sr-only">Sydney Technical High School - Interact</span>
            </a>
          </div>
        <div class="nsw-header__name">
          <div class="nsw-header__title">STHS Interact</div>
          <div class="site-slogan">Student Social Justice</div>
        </div>
      </div>
      <div class="nsw-header__menu">
        <button type="button" class="js-open-nav" aria-expanded="false" aria-controls="main-nav">
          <span class="material-icons nsw-material-icons" focusable="false" aria-hidden="true">menu</span>
          <span><span class="sr-only">Open</span> Menu</span>
        </button>
      </div>
    </div>
  </div>
</header>
<nav class="nsw-main-nav js-mega-menu" id="main-nav" aria-label="Main menu">
  <div class="nsw-main-nav__header">
    <div class="nsw-main-nav__title">Menu</div>
    <button class="nsw-icon-button js-close-nav" type="button" aria-expanded="true">
      <span class="material-icons nsw-material-icons" focusable="false" aria-hidden="true">close</span>
      <span class="sr-only">Close Menu</span>
    </button>
  </div>
  <ul class="nsw-main-nav__list">
    
    
<li>
      <a href="/portal/">
        <span>Home</span>
      </a>    </li>
      <li>
        <a href="/portal/case-search/">
          <span>Case search</span>
        </a>    </li>
    <li>
        <a href="/portal/witness-statement/">
        <span>Witness Statement</span>
        </a>    </li>
    <li>
      <a href="/portal/my-account/">
        <span>My account</span>
      </a>    </li>
      <li>
        <a <button class="logout-btn" id="logout-btn">Log Out</button>
        </a>    </li>
  </ul>
</nav>

  <script src="https://designsystem.nsw.gov.au/js/main.js"></script>
  <script>
    window.NSW.initSite()
  </script>
</body>

<div class="nsw-container">
    <div class="nsw-layout">
      <main class="nsw-layout__main">
        <div id="pdf-tool" style="max-width: 800px; margin: 0 auto; padding: 20px; font-family: Arial, sans-serif;">
            <div class="nsw-h2">Fill Witness Statement</div>
            <p class="nsw-intro">
                This tool allows you to quickly and efficiently generate a witness statement form. Please note that an official seal is required for authenticity.
              </p>
            <hr>
            <form id="witness-form" style="display: flex; flex-direction: column; gap: 20px;">
              <label for="case-number" style="font-weight: bold;">Case Number:</label>
              <input type="text" id="case-number" name="caseNumber" style="padding: 10px; font-size: 16px;" required>
          
              <label for="case-type" style="font-weight: bold;">Case Type:</label>
              <input type="text" id="case-type" name="caseType" style="padding: 10px; font-size: 16px;" required>
          
              <label for="confidentiality" style="font-weight: bold;">Confidentiality:</label>
              <input type="text" id="confidentiality" name="confidentiality" style="padding: 10px; font-size: 16px;" required>
          
              <label for="name" style="font-weight: bold;">Name:</label>
              <input type="text" id="name" name="name" style="padding: 10px; font-size: 16px;" required>
          
              <label for="email" style="font-weight: bold;">Email Address:</label>
              <input type="email" id="email" name="email" style="padding: 10px; font-size: 16px;" required>
          
              <label for="statement" style="font-weight: bold;">Statement:</label><br>
              <textarea id="statement" name="statement" rows="5" cols="50" style="padding: 10px; font-size: 16px; width: 100%;" required></textarea><br>
          
              <button type="button" id="export-btn" style="padding: 10px 20px; background-color: #007BFF; color: white; border: none; font-size: 16px; cursor: pointer; border-radius: 7px;">
                Export to PDF
              </button>
              
            </form>
          </div>
          
          <!-- Include the pdf-lib library -->
          <script src="https://cdn.jsdelivr.net/npm/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
          
          <script>
            document.addEventListener("DOMContentLoaded", () => {
              const caseNumberField = document.getElementById("case-number");
              const caseTypeField = document.getElementById("case-type");
              const confidentialityField = document.getElementById("confidentiality");
              const nameField = document.getElementById("name");
              const emailField = document.getElementById("email");
              const statementField = document.getElementById("statement");
          
              if (!caseNumberField || !caseTypeField || !confidentialityField || !nameField || !emailField || !statementField) {
                console.error("Some form fields are missing");
                return;
              }
          
              document.getElementById("export-btn").addEventListener("click", async () => {
                // Fetch the header image
                const headerImageUrl = "/api/witness-header.png";
                const headerImageBytes = await fetch(headerImageUrl).then(res => res.arrayBuffer());
          
                // Create a new PDF document
                const pdfDoc = await PDFLib.PDFDocument.create();
          
                // Embed the header image
                const headerImage = await pdfDoc.embedPng(headerImageBytes);
          
                // Add a page to the document
                const page = pdfDoc.addPage();
                const { width, height } = page.getSize();
          
                // Adjust header size and positioning (smaller header)
                const headerHeight = 60; // Smaller header height
                const headerWidth = (headerImage.width / headerImage.height) * headerHeight;
                page.drawImage(headerImage, {
                  x: (width - headerWidth) / 2,
                  y: height - headerHeight - 30, // Add some spacing from the top
                  width: headerWidth,
                  height: headerHeight
                });
          
                // Set font size for text content
                const fontSize = 12;
                page.setFontSize(fontSize);
          
                // Text Y-position for each section (adjusted for spacing)
                let yPosition = height - headerHeight - 90; // Increased space for better alignment
          
                // Add content dynamically from the form
                page.drawText(`Case Number: ${caseNumberField.value}`, { x: 50, y: yPosition });
                yPosition -= fontSize + 10;
          
                page.drawText(`Case Type: ${caseTypeField.value}`, { x: 50, y: yPosition });
                yPosition -= fontSize + 10;
          
                page.drawText(`Confidentiality: ${confidentialityField.value}`, { x: 50, y: yPosition });
                yPosition -= fontSize + 10;
          
                page.drawText(`Name: ${nameField.value}`, { x: 50, y: yPosition });
                yPosition -= fontSize + 10;
          
                page.drawText(`Email: ${emailField.value}`, { x: 50, y: yPosition });
                yPosition -= fontSize + 10;
          
                page.drawText(`Statement:`, { x: 50, y: yPosition });
                yPosition -= fontSize + 10;
          
                // Split statement text if it's too long
                const statementText = statementField.value;
                let statementLines = [];
                const maxLineLength = 90; // Max characters per line
                let currentLine = '';
                for (let i = 0; i < statementText.length; i++) {
                  currentLine += statementText[i];
                  if (currentLine.length >= maxLineLength || statementText[i] === '\n') {
                    statementLines.push(currentLine);
                    currentLine = '';
                  }
                }
                if (currentLine) {
                  statementLines.push(currentLine);
                }
          
                // Draw each line of the statement
                statementLines.forEach(line => {
                  page.drawText(line, { x: 50, y: yPosition });
                  yPosition -= fontSize + 5;
                });
          
                // Save the PDF
                const pdfBytes = await pdfDoc.save();
          
                // Trigger the download of the generated PDF
                const blob = new Blob([pdfBytes], { type: "application/pdf" });
                const fileName = `${caseNumberField.value} - Witness Statement.pdf`; // Use the case number in the filename
                const link = document.createElement("a");
                link.href = URL.createObjectURL(blob);
                link.download = fileName;
                link.click();
              });
            });
          </script>
          
          
      </main>
    </div>
  </div>
  
  


  

<footer class="nsw-footer">
    <div class="nsw-footer__lower">
      <div class="nsw-container">
        <p class="nsw-footer__acknowledgement">We pay respect to the Traditional Custodians and First Peoples of NSW, and acknowledge their continued connection to their country and culture.</p>
        <hr>
        <div class="nsw-footer__links">
        <ul>
          <li><a href="#">Home</a></li>
          <li><a href="#">My account</a></li>
        </ul>
        </div>
        <div class="nsw-footer__info">
          <div class="nsw-footer__copyright">Copyright Â© Interact iSSJ - 2024</div>
        </div>
      </div>
    </div>
  </footer>

<script>
            // Check if the user is logged in
            if (localStorage.getItem("loggedIn") !== "true") {
            window.location.href = "/auth/"; // Redirect to login page
        }

        // Display user information and set up page
        document.addEventListener("DOMContentLoaded", async () => {
            const username = localStorage.getItem("username");
            const role = localStorage.getItem("role");
            const currentDate = new Date().toLocaleDateString('en-US', {
                weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
            });

            // Display user details
            document.getElementById("username").textContent = username || 'Guest';
            document.getElementById("currentDate").textContent = currentDate;
            document.getElementById("userRole").textContent = role || 'No Role Assigned';

            // Show notice form if the user is a Super-User
            if (role === "Super-User") {
                document.getElementById("notice-form-container").style.display = "block";
            }

            // Handle logout
            document.getElementById("logout-btn").addEventListener("click", () => {
                localStorage.removeItem("loggedIn");
                localStorage.removeItem("username");
                localStorage.removeItem("role");
                window.location.href = "/auth/";
            });
        });
</script>

</html>